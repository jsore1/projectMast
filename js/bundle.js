!function(){"use strict";function e(e,t){return new Promise(((n,o)=>{const d=document.createElement("div");d.classList.add("modal__image-card"),t.prepend(d);const l=document.createElement("img");l.onload=()=>n(l),l.classList.add("modal__img"),d.prepend(l),l.setAttribute("src",e)}))}function t(e){document.querySelector(e).classList.add("show")}function n(e){document.querySelector(e).classList.remove("show"),document.querySelector(".modal__image-inner").style.transition="none"}function o(n,o,d){const l=document.querySelector(".modal__text"),c=document.querySelector(".modal__title"),r=document.querySelector(".modal__date"),a=document.querySelector(".modal__image-inner"),s=document.querySelector(".modal__next"),i=document.querySelector(".modal__back"),m=document.querySelector(".loader"),u=[];document.querySelectorAll(".modal__image-card").forEach((e=>{e.remove()})),l.classList.add("hide"),c.textContent=n[o-1].title,r.textContent=d[0].description,a.style.width=100*d.length+"%",m.classList.add("show"),d.length>1?(d.forEach(((t,n)=>{u.push(e(d[n].url,a))})),Promise.all(u).then((()=>{m.classList.remove("show"),t(".modal"),function(e){const t=window.getComputedStyle(document.querySelector(".modal__image-wrapper")).width,n=document.querySelector(".modal__next"),o=document.querySelector(".modal__back"),d=document.querySelector(".modal__image-inner"),l=document.querySelector(".modal__date");n.classList.remove("hide"),o.classList.remove("hide");let c=+t.slice(0,t.length-2)*(e.length-1),r=0;d.style.transform=`translateX(-${c}px)`,n.addEventListener("click",(()=>{d.style.transition="0.5s all",+c.toFixed(1)==+(+t.slice(0,t.length-2)*(e.length-1)).toFixed(1)?(c=0,r=e.length-1):(c+=+t.slice(0,t.length-2),r-=1),d.style.transform=`translateX(-${c}px)`,l.textContent=e[r].description})),o.addEventListener("click",(()=>{d.style.transition="0.5s all",0==c?(c=+t.slice(0,t.length-2)*(e.length-1),r=0):(c-=+t.slice(0,t.length-2),r+=1),d.style.transform=`translateX(-${c}px)`,l.textContent=e[r].description}))}(d)}))):e(d[0].url,a).then((()=>{a.style.transform="none",s.classList.add("hide"),i.classList.add("hide"),m.classList.remove("show"),t(".modal")}))}window.addEventListener("DOMContentLoaded",(()=>{fetch("select_points.php",{method:"POST"}).then((e=>e.json())).then((e=>{!function(e,t){if(e.length>0){const t=document.querySelector(".plan");e.forEach((e=>{t.insertAdjacentHTML("beforeend",`<div class="plan__point" style="top: ${e.y}px;left: ${e.x}px" data-id="${e.id}">\n                    ${e.name}\n                </div>`)}))}}(e),function(e,t,n){document.querySelector(".plan").addEventListener("click",(t=>{const d=+t.target.getAttribute("data-id");if(t.target&&t.target.className===n){let t=new FormData;t.append("id",d),fetch("select_images_archive.php",{method:"POST",body:t}).then((e=>e.json())).then((t=>{t.push({url:e[d-1].url,description:e[d-1].date}),o(e,d,t.reverse())}))}}))}(e,0,"plan__point")})),fetch("get_table.php",{method:"POST"}).then((e=>e.json())).then((e=>{const t=document.querySelector(".main-table").children[0].children[1];e.reverse().forEach(((e,n)=>{const o=`<tr>\n                            <td>${e.date}</td>\n                            <td>${e.numberObject}</td>\n                            <td>${e.description}</td>\n                            <td>${e.secondName}</td>\n                        </tr>`;t.insertAdjacentHTML("beforeend",o)}))})),function(){const e=document.querySelector(".modal");document.querySelector(".modal__close").addEventListener("click",(()=>n(".modal"))),e.addEventListener("click",(t=>{t.target===e&&n(".modal")}))}()}))}();
//# sourceMappingURL=bundle.js.map